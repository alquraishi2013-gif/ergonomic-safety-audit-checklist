<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Ù†Ø³Ø®Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„ â€“ Ergonomic Industrial</title>
<style>
:root{--bg:#f7f8fb;--ink:#111;--card:#fff;--accent:#2563eb;--muted:#666}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--ink);font-family:"Noto Kufi Arabic","Cairo",sans-serif}
.wrap{max-width:920px;margin:auto;background:var(--card);padding:20px;border-radius:12px;box-shadow:0 0 12px rgba(0,0,0,.1)}
.toolbar{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin-bottom:15px}
.btn{padding:8px 14px;border:1px solid #ddd;border-radius:10px;background:#fff;cursor:pointer;font-size:14px}
.btn.primary{background:var(--accent);color:#fff;border-color:var(--accent)}
.btn.warn{background:#fee2e2;border-color:#ef4444}
iframe{width:100%;height:80vh;border:none;border-radius:8px;background:#fff}
footer{text-align:center;font-size:.85rem;color:var(--muted);margin-top:10px}
@media(max-width:720px){iframe{height:75vh}}
@media print{.no-print{display:none}}
</style>
</head>
<body>
<div class="wrap">
  <h1 style="text-align:center;color:var(--accent);margin-bottom:10px">ğŸ§¾ Ù†Ø³Ø®Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„ â€“ Ergonomic Industrial</h1>

  <div class="toolbar no-print">
    <button class="btn primary" id="printBtn">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© / PDF</button>
    <button class="btn" id="sendWhatsApp">ğŸ’¬ Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</button>
    <button class="btn" id="sendEmail">âœ‰ï¸ Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± Ø§Ù„Ø¨Ø±ÙŠØ¯</button>
    <button class="btn" id="resendToClient">ğŸ” Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ø¹Ù…ÙŠÙ„</button>
    <button class="btn" id="saveLocal">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª</button>
    <button class="btn" id="shareGeneral">ğŸ“¤ Ù…Ø´Ø§Ø±ÙƒØ©</button>
  </div>

  <iframe id="preview"></iframe>
  <footer>Ergonomic Industrial Â© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</footer>
</div>

<script>
document.addEventListener('DOMContentLoaded',()=>{
  const iframe=document.getElementById('preview');
  const html=localStorage.getItem('client_preview_html');
  if(!html){
    document.body.innerHTML='<div style="text-align:center;padding:50px"><h2 style="color:#b91c1c">âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø¹Ø±Ø¶</h2><p>Ø§ÙØªØ­ Ø§Ù„ØµÙØ­Ø© Ù…Ù† Ø²Ø± <strong>ØªØµØ¯ÙŠØ± Ù†Ø³Ø®Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„</strong> Ø¯Ø§Ø®Ù„ Ø§Ù„Ù†Ø¸Ø§Ù….</p></div>';
    return;
  }

  // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ø³Ø®Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¥Ø·Ø§Ø±
  const doc=iframe.contentDocument||iframe.contentWindow.document;
  doc.open(); doc.write(html); doc.close();

  // === Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø£Ø¯ÙˆØ§Øª ===
  document.getElementById('printBtn').onclick=()=>iframe.contentWindow.print();

  document.getElementById('sendWhatsApp').onclick=()=>{
    const text="Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ù‡Ø°Ù‡ Ù†Ø³Ø®Ø© Ø§Ù„Ø¨Ø§Ø¨ Ù„Ù„ØªØ¯Ù‚ÙŠÙ‚ Ù…Ù† Ergonomic Industrial. ğŸ‘‡";
    const blob=new Blob([html],{type:'text/html'});
    const file=new File([blob],'Ergonomic-Checklist.html',{type:'text/html'});
    if(navigator.canShare && navigator.canShare({files:[file]})){
      navigator.share({title:"Ergonomic Industrial",text:text,files:[file]});
    }else{
      const msg=encodeURIComponent(text);
      window.open(`https://wa.me/?text=${msg}`,'_blank');
    }
  };

  document.getElementById('sendEmail').onclick=()=>{
    const subject="Ù†Ø³Ø®Ø© Ø§Ù„ØªØ¯Ù‚ÙŠÙ‚ â€“ Ergonomic Industrial";
    const body="Ù…Ø±ÙÙ‚ Ù†Ø³Ø®Ø© Ø§Ù„ØªØ¯Ù‚ÙŠÙ‚ Ø§Ù„Ø®Ø§ØµØ© Ø¨ÙƒÙ….\n\nØªØ­ÙŠØ§ØªÙ†Ø§ØŒ\nErgonomic Industrial";
    window.location.href=`mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
  };

  document.getElementById('resendToClient').onclick=()=>{
    const text="ğŸ“© ØªÙ…Øª Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¨Ø§Ø¨ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ù…Ø¯Ù‚Ù‚.\nÙŠØ±Ø¬Ù‰ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ø¯ÙŠØ«.";
    const msg=encodeURIComponent(text);
    window.open(`https://wa.me/?text=${msg}`,'_blank');
  };

  document.getElementById('saveLocal').onclick=()=>{
    try{
      localStorage.setItem('client_saved_html',html);
      alert('âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù†Ø³Ø®Ø© Ù…Ø­Ù„ÙŠÙ‹Ø§ Ø¨Ù†Ø¬Ø§Ø­.');
    }catch(e){alert('âŒ ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø­ÙØ¸.');}
  };

  document.getElementById('shareGeneral').onclick=()=>{
    const blob=new Blob([html],{type:'text/html'});
    const file=new File([blob],'Ergonomic-Checklist.html',{type:'text/html'});
    if(navigator.canShare && navigator.canShare({files:[file]})){
      navigator.share({title:"Ergonomic Industrial",text:"Ù…Ø´Ø§Ø±ÙƒØ© Ù†Ø³Ø®Ø© Ø§Ù„ØªØ¯Ù‚ÙŠÙ‚",files:[file]});
    }else{
      alert('Ø®Ø§ØµÙŠØ© Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…Ø© ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØµÙØ­.');
    }
  };
});
</script>
</body>
</html>
